(this["webpackJsonppoll-app"]=this["webpackJsonppoll-app"]||[]).push([[0],{146:function(e,t,c){},147:function(e,t,c){},156:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),i=c(62),s=c.n(i),r=(c(146),c(16)),o=(c(147),c(231)),l=c(232),j=c(227),b=c(125),d=c.n(b),u=c(222),O=c(228),h=c(229),f=c(218),x=c(230),p=c(75),m=c(26),v=c(25),g=c(57),w=c(234),C=c(109),y=c.n(C),S=c(233),k=c(213),P=c(236),N=c(219),A=c(237),D=c(241),E=c(239),L=c(240),I=c(238),T=c(90),q=c.n(T),z=c(40),F=(c(83),c(224)),H=c(243),R=c(123),W=c.n(R),B=c(122),M=c.n(B),Q=c(1);function X(e){var t=Object(n.useState)(!1),c=Object(r.a)(t,2),a=c[0],i=c[1];return Object(Q.jsx)(F.a,{disabled:!0,endAdornment:Object(Q.jsx)(H.a,{position:"end",children:Object(Q.jsx)(j.a,{onClick:function(){i(!0),navigator.clipboard&&navigator.clipboard.writeText(e.link)},edge:"end",children:a?Object(Q.jsx)(M.a,{}):Object(Q.jsx)(W.a,{})})}),label:"Public Link",value:e.link})}var J=c(220),K=c(216),U=Object(n.forwardRef)((function(e,t){return Object(Q.jsx)(K.a,Object(g.a)({elevation:6,ref:t,variant:"filled"},e))}));function G(){var e=Object(n.useState)(!0),t=Object(r.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(["",""]),s=Object(r.a)(i,2),o=s[0],l=s[1],j=Object(n.useState)(""),b=Object(r.a)(j,2),d=b[0],u=b[1],h=Object(n.useState)(Object(N.a)()),f=Object(r.a)(h,2),x=f[0],p=(f[1],Object(n.useState)(Object(N.a)())),g=Object(r.a)(p,2),C=g[0],T=(g[1],Object(n.useState)(!1)),F=Object(r.a)(T,2),H=F[0],R=F[1],W=Object(n.useState)(!1),B=Object(r.a)(W,2),M=B[0],K=B[1],G=Object(m.f)(),V=function(){R(!1),G.push("/edit/".concat(C))};return Object(Q.jsx)("div",{children:c?Object(Q.jsx)(O.a,{sx:{"& > :not(style)":{m:1}},className:"mid",children:Object(Q.jsxs)(S.a,{variant:"outlined",children:[Object(Q.jsx)("div",{children:Object(Q.jsx)(w.a,{color:"primary","aria-label":"add",onClick:function(){a(!1)},children:Object(Q.jsx)(y.a,{})})}),Object(Q.jsx)("div",{children:Object(Q.jsx)("h1",{children:"Create a Poll"})})]})}):Object(Q.jsxs)(O.a,{className:"partial-width",component:"form",children:[Object(Q.jsx)("h3",{children:"What would you like to ask?"}),Object(Q.jsxs)("div",{class:"",children:[Object(Q.jsx)(k.a,{required:!0,id:"title",label:"Type your Question",placeholder:"Poll Title",fullWidth:!0,margin:"normal",onChange:function(e){u(e.target.value)},className:"wide",multiline:!0,rows:4}),Object(Q.jsx)("h3",{children:"Fill in your Options"}),o.map((function(e,t){return Object(Q.jsxs)("div",{className:"flex-row",children:[Object(Q.jsxs)("h3",{children:[Object(Q.jsx)("br",{}),t+1,":"]}),Object(Q.jsx)(k.a,{required:!0,id:"option-".concat(t+1),label:"option ".concat(t+1),placeholder:"option ".concat(e),margin:"normal",onChange:function(e){!function(e,t){l((function(c){return c.map((function(c,n){return t===n?e.target.value:c}))}))}(e,t)},className:"long"}),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("br",{}),Object(Q.jsx)(w.a,{color:"primary","aria-label":"add",onClick:function(){a(!1)},size:"small",children:Object(Q.jsx)(q.a,{fontSize:"small",onClick:function(e){l(o.filter((function(e,c){return c!==t})))}})})]})]})})),Object(Q.jsx)("br",{}),Object(Q.jsx)("div",{className:"mid",children:Object(Q.jsx)(w.a,{color:"primary","aria-label":"add",onClick:function(){l([].concat(Object(v.a)(o),[""]))},children:Object(Q.jsx)(y.a,{})})}),Object(Q.jsx)("br",{}),Object(Q.jsx)("div",{className:"mid",children:Object(Q.jsx)(P.a,{type:"submit",onClick:function(e){e.preventDefault();var t=!1;if(o.forEach((function(e){""===e&&(t=!0)})),""===d||t)K(!0);else{var c={};o.forEach((function(e,t){c[t]=0})),z.a.firestore().collection("Poll").doc().set({title:d,options:o,admin:C,id:x,votes:c}).then((function(e){R(!0)}))}},className:"mid",children:Object(Q.jsx)("h3",{children:"Create Poll"})})})]}),Object(Q.jsxs)(A.a,{open:H,onClose:V,children:[Object(Q.jsx)(I.a,{children:"Poll Created"}),Object(Q.jsx)(E.a,{children:Object(Q.jsxs)(L.a,{children:["Admin Link:",Object(Q.jsx)("br",{}),Object(Q.jsx)(X,{link:window.location.href+"edit/"+C}),Object(Q.jsx)("br",{}),Object(Q.jsx)("span",{className:"small",children:"*Do not share this link with anyone*"}),Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),"Public Link:",Object(Q.jsx)("br",{}),Object(Q.jsx)(X,{link:window.location.href+x}),Object(Q.jsx)("br",{}),Object(Q.jsx)("span",{className:"small",children:"*The links might not get copied on pressing the copy button on some browsers*"})]})}),Object(Q.jsxs)(D.a,{children:[Object(Q.jsx)(P.a,{onClick:V,children:"Cancel"}),Object(Q.jsx)(P.a,{onClick:V,children:"OK"})]})]}),Object(Q.jsx)(J.a,{open:M,autoHideDuration:6e3,onClose:function(){K(!1)},children:Object(Q.jsx)(U,{onClose:function(){K(!1)},severity:"warning",sx:{width:"100%"},children:"Please fill all the inputs"})})]})})}var V=c(3),Y=c.n(V),Z=c(9),_=c(214),$=c(223),ee=c(242),te=c(235),ce=c(245),ne=c(226);function ae(e){return Object(Q.jsxs)(O.a,{sx:{display:"flex",alignItems:"center"},children:[Object(Q.jsx)(O.a,{sx:{width:"100%",mr:1},children:Object(Q.jsx)(ce.a,Object(g.a)({variant:"determinate"},e))}),Object(Q.jsx)(O.a,{sx:{minWidth:35},children:Object(Q.jsx)(ne.a,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}var ie=Object(n.forwardRef)((function(e,t){return Object(Q.jsx)(K.a,Object(g.a)({elevation:6,ref:t,variant:"filled"},e))}));function se(e){var t=Object(n.useState)(""),c=Object(r.a)(t,2),a=c[0],i=c[1],s=Object(n.useState)([]),o=Object(r.a)(s,2),l=o[0],j=o[1],b=Object(m.g)().id,d=Object(n.useState)(void 0),u=Object(r.a)(d,2),O=u[0],h=u[1],f=Object(n.useState)(!1),x=Object(r.a)(f,2),p=x[0],v=x[1],g=Object(n.useState)(void 0),w=Object(r.a)(g,2),C=w[0],y=w[1],S=Object(n.useState)(!!localStorage.getItem(b)),k=Object(r.a)(S,2),N=k[0],A=k[1],D=Object(n.useState)([]),E=Object(r.a)(D,2),L=E[0],I=E[1],T=Object(n.useState)(0),q=Object(r.a)(T,2),F=q[0],H=q[1],R=function(e){if(e){var t=0;Object.getOwnPropertyNames(e).forEach((function(c){t+=e[c]})),H(t)}};return Object(n.useEffect)((function(){z.a.firestore().collection("Poll").where("id","==",b).get().then((function(e){e.forEach((function(e){y(e.id),i(e.data().title),j(e.data().options),I(e.data().votes),R(e.data().votes),z.a.firestore().collection("Poll").onSnapshot((function(e){e.forEach((function(e){e.data().id===b&&(I(e.data().votes),i(e.data().title),j(e.data().options),R(e.data().votes))}))}))}))}))}),[N]),Object(Q.jsxs)("div",{className:"flex-col",children:[Object(Q.jsx)("br",{}),Object(Q.jsx)("div",{className:"card long mid",style:{marginLeft:"7%"},children:Object(Q.jsxs)("h1",{children:[a," ",N?Object(Q.jsxs)("span",{children:["(",F,")"]}):""]})}),Object(Q.jsx)("br",{}),Object(Q.jsx)(te.a,{component:"fieldset",className:"long",children:Object(Q.jsx)($.a,{"aria-label":"gender",defaultValue:"female",name:"radio-buttons-group",onChange:function(e){h(e.target.value)},children:l.map((function(e,t){return N?Object(Q.jsxs)("div",{children:[Object(Q.jsxs)("div",{className:"card flex-col",style:{marginLeft:"20%"},children:[e," (",L[t],"):",Object(Q.jsx)(ae,{value:Math.floor(L["".concat(t)])/F*100|0}),Object(Q.jsx)("br",{})]}),Object(Q.jsx)("br",{})]}):Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{className:"card flex-col",style:{marginLeft:"20%"},children:Object(Q.jsx)(ee.a,{value:t,control:Object(Q.jsx)(_.a,{}),label:e,id:t},t)}),Object(Q.jsx)("br",{})]})}))})}),Object(Q.jsx)("br",{}),N?Object(Q.jsx)("div",{}):Object(Q.jsx)(P.a,{onClick:function(e){e.preventDefault(),void 0!==O?(A(!0),localStorage.setItem(b,!0),void 0!==C&&z.a.firestore().runTransaction(function(){var e=Object(Z.a)(Y.a.mark((function e(t){var c,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.firestore().collection("Poll").doc(C).get();case 2:c=e.sent,(n=c.data().votes)[O]=n[O]+1,t.update(z.a.firestore().collection("Poll").doc(C),{votes:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):v(!0)},children:"Submit"}),Object(Q.jsx)(J.a,{open:p,autoHideDuration:6e3,onClose:function(){v(!1)},children:Object(Q.jsx)(ie,{onClose:function(){v(!1)},severity:"warning",sx:{width:"100%"},children:N?"The page has been updated, refresh to see the changes!":"Please select an option"})})]})}var re=Object(n.forwardRef)((function(e,t){return Object(Q.jsx)(K.a,Object(g.a)({elevation:6,ref:t,variant:"filled"},e))}));function oe(e){var t=Object(n.useState)(""),c=Object(r.a)(t,2),a=c[0],i=c[1],s=Object(n.useState)([]),o=Object(r.a)(s,2),l=o[0],j=o[1],b=Object(m.g)().id,d=Object(n.useState)(!1),u=Object(r.a)(d,2),h=u[0],f=u[1],x=Object(n.useState)(void 0),p=Object(r.a)(x,2),v=p[0],g=p[1],C=Object(n.useState)(void 0),y=Object(r.a)(C,2),S=y[0],N=y[1];return Object(n.useEffect)((function(){z.a.firestore().collection("Poll").where("admin","==",b).get().then((function(e){e.forEach((function(e){g(e.id),i(e.data().title),j(e.data().options),N(e.data().id)}))}))}),[]),Object(Q.jsx)(O.a,{children:Object(Q.jsxs)(O.a,{className:"partial-width",component:"form",children:[Object(Q.jsx)("h1",{children:"Admin Page"}),Object(Q.jsx)("div",{children:Object(Q.jsxs)("div",{children:[" Public Link: ",Object(Q.jsx)("br",{}),Object(Q.jsx)(X,{link:window.location.host+"/"+S})]})}),Object(Q.jsx)("h3",{children:"Poll Question"}),Object(Q.jsxs)("div",{class:"",children:[Object(Q.jsx)(k.a,{required:!0,id:"title",fullWidth:!0,margin:"normal",onChange:function(e){i(e.target.value)},className:"wide",value:a,multiline:!0,rows:4}),Object(Q.jsx)("h3",{children:"Options"}),l.map((function(e,t){return Object(Q.jsxs)("div",{className:"flex-row",children:[Object(Q.jsxs)("h3",{children:[Object(Q.jsx)("br",{}),t+1,":"]}),Object(Q.jsx)(k.a,{required:!0,id:"option-".concat(t+1),margin:"normal",onChange:function(e){!function(e,t){j((function(c){return c.map((function(c,n){return t===n?e.target.value:c}))}))}(e,t)},className:"long",value:e}),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("br",{}),Object(Q.jsx)(w.a,{color:"primary","aria-label":"add",onClick:function(){},size:"small",children:Object(Q.jsx)(q.a,{fontSize:"small",onClick:function(e){j(l.filter((function(e,c){return c!==t})))}})})]})]})})),Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),Object(Q.jsx)(P.a,{type:"submit",onClick:function(e){e.preventDefault();var t=!1;if(l.forEach((function(e){""===e&&(t=!0)})),""===a||t)f(!0);else{var c={};l.forEach((function(e,t){c[t]=0})),z.a.firestore().runTransaction(function(){var e=Object(Z.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.update(z.a.firestore().collection("Poll").doc(v),{title:a,options:l});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},children:Object(Q.jsx)("h3",{children:"Update Poll"})})]}),Object(Q.jsx)(J.a,{open:h,autoHideDuration:6e3,onClose:function(){f(!1)},children:Object(Q.jsx)(re,{onClose:function(){f(!1)},severity:"success",sx:{width:"100%"},children:"Poll Updated!"})})]})})}var le=function(){var e,t=Object(n.useState)(!1),c=Object(r.a)(t,2),a=c[0],i=c[1];return Object(Q.jsxs)("div",{className:"App",children:[Object(Q.jsx)(o.a,{position:"static",children:Object(Q.jsxs)(l.a,{variant:"dense",children:[Object(Q.jsx)(j.a,{edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:function(){i(!0)},children:Object(Q.jsx)(d.a,{})}),Object(Q.jsx)("h1",{children:"Async Poll: Quick and Realtime"})]})}),Object(Q.jsx)(u.a,{anchor:"left",open:a,onClose:function(){i(!1)},children:(e="left",Object(Q.jsx)(O.a,{sx:{width:"top"===e||"bottom"===e?"auto":250},role:"presentation",children:Object(Q.jsx)(h.a,{children:["About Ayas","About Poll","Contact Me","Download Resume"].map((function(e,t){return Object(Q.jsx)(f.a,{button:!0,children:Object(Q.jsx)(x.a,{primary:e})},e)}))})}))}),Object(Q.jsx)(p.a,{children:Object(Q.jsxs)(m.c,{children:[Object(Q.jsx)(m.a,{path:"/",exact:!0,children:Object(Q.jsx)(G,{})}),Object(Q.jsx)(m.a,{path:"/edit/:id",children:Object(Q.jsx)(oe,{})}),Object(Q.jsx)(m.a,{path:"/:id",children:Object(Q.jsx)(se,{})})]})})]})},je=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,246)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),i(e),s(e)}))};z.a.default.initializeApp({apiKey:"AIzaSyBAZXYH_CcCbyqTGnLLfVFXqyyXXu7Q97U",authDomain:"cl-5b1fd.firebaseapp.com",projectId:"cl-5b1fd",storageBucket:"cl-5b1fd.appspot.com",messagingSenderId:"1091320665139",appId:"1:1091320665139:web:fb9a4d94c9eb3b31f7ff46",measurementId:"G-J2DWHSK673"}),s.a.render(Object(Q.jsx)(a.a.StrictMode,{children:Object(Q.jsx)(le,{})}),document.getElementById("root")),je()}},[[156,1,2]]]);
//# sourceMappingURL=main.3834c0d1.chunk.js.map